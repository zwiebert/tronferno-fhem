=pod
=begin html_DE
 <h3>FHEM Modul Fernotron Manual<h3>

     <i>Fernotron</i> ist ein logisches Modul zur Steuerung von Fernotron Rolläden.  Die erzeugten Kommandos werden über <i>SIGNALduino</i> als Raw gesendet. <i>Fernotron</i> kann außerdem empfangene Raw Nachrichten wieder in Kommandos umwandeln, was aber bei einem unidirektionalem Protokoll nicht sehr viel Nutzen bringt. 


<h4>Grundlagen<h4>

Jedes Gerät eine ID-Nummer ab Werk fest einprogrammiert. Empfänger und Sender werden gekoppelt, indem sich der Empfänger die ID des Senders merkt. Jeder Empfänger kann sich je eine ID einer Zentraleinheit (inklusive Gruppe und Empfängernummer), eines Sonnensensors und mehrerer Handsender merken.


<h4>Gerät definieren<h4>

Ein Gerät kann einen einzige Rolladen aber  auch eine ganze Gruppe ansprechen.  Dies wird durch die verwendete ID und Gruppen und Empfängernummer bestimmt.

<code>
    define <MeinRolladen> Fernotron a=ID [g=GN] [m=MN]
			
		
    ID : Die Geräte ID. Eine  sechstellige hexadezimale Zahl.  10xxxx=Handsender, 20xxxx=Sonnensensor, 80xxxx=Zentraleinheit, 90xxxx=Empfänger
    GN : Gruppennummer (1-7) oder 0 (default) für alle Gruppen
    MN : Empfängernummer (1-) oder 0 (default) für alle Empfänger
</code>
			
'g' und 'n' sind nur sinnvoll, wenn als ID eine Zentraleinheit angegeben wurde 


<h4>Verschiedene Methoden der Adressierung</h4>

<ol>
<li> Die IDs vorhandener Sende-Geräte einscannen und dann benutzen. Beispiel: Die ID der 2411 benutzen um dann über Gruppen und Empfängernummern die Rolläden anzusprechen.</li>

<li> Ausgedachte IDs mit Motoren zu koppeln.  Beispiel: Rolladen Nr 1 mit 100001, Nr 2 mit 100002, ...</li>

<li> Empfänger IDs: Funkmotoren haben 5 stellige "Funk-Codes" aufgedruckt, eigentlich gedacht zur Inbetriebnahme. Es muss eine 9 davorgestellt werden um die ID zu erhalten.</li>
</ol>

<h5>Gruppenbildung<h5>

   <ol>
<li>Gruppen und Empfäger entsprechen der 2411. Gruppenbildung durch die 0 als Joker.  (g=1 m=0 oder g=0 m=1) </li>

<li> Wie bei realen Handsendern. Beispiel: Ein (virtueller) Handsender wird bei allen Motoren einer Etage angemeldet.</li>

<li> nicht möglich</li>
</ol>


<h4>Kommandos</h4>

<ul>
<li>up - öffnen</li>
<li>down - schließen</li>
<li>stop - anhalten</li>
<li>set  - Setzfunktion aktivieren</li>
<li>sun-down - Herunterfahren bis Sonnenposition (nur bei aktiverter Sonnenautomatik)</li>
<li>sun-inst - aktuelle Position als Sonnenposition speichern</li>
</ul>

<h4>Beispiele</h4>

<ol>
  <li>

    <code>
      ID der vorhandenen 2411 scannen:

           Shell-Kommando: perl fhemft.pl --scan -n=sduino -v=4 
             -- jetzt den STOP Knopf der 2411 festhalten ---
           Shell-Ausgabe: id=80abcd,  ....  (ID notieren)

       Eingaben im FHEM Webinterface 
 
          Kommando-Feld: define Rolladen_11 Fernotron a=80abcd g=1 m=1  (Enter)
		  attr Feld: webCmd: down:stop:up  (Enter)
		  Save config
		  
          ...
		  
          Kommando-Feld: define Rolladen_42 Fernotron a=80abcd g=4 m=2  (Enter)
  		  attr Feld: webCmd: down:stop:up  (Enter)
		  Save config
		  
		  ...
		  
          Kommando-Feld: define Rolladen_Alle Fernotron  a=80abcd  (Enter)
		  attr Feld: webCmd: down:stop:up  (Enter)
		  Save config
	</code>	  
  </li>
  <li>
    <code>
   Eingaben im FHEM Webinterface 

          Kommando-Feld: define Rolladen_Bad a=100001 Fernotron    (Enter)
		  attr Feld: webCmd: down:stop:up  (Enter)
		  Save config

          Rolladen im Bad in den Setzmodus versetzen (Set-Knopf oder 2411 Set-Funktion)
		  
		  stop anklicken zum koppeln (Motor quittiert durch anlaufen)
		  
		  up oder down anklicken. Motor sollte reagieren.
		  
		  Kommando-Feld: define Rolladen_Kueche  Fernotron a=100002   (Enter)
		  attr Feld: webCmd: down:stop:up  (Enter)
		  Save config
		  
                    ...
   </code>
  </li>
  <li>
		  
<code>		  

          Motorcode herausfinden. Steht auf Kabel-Sticker und direkt auf dem Motor (wenn ausgebaut).
		  Beispiel: Code 0D1234 aufgedruckt

* Eingaben im FHEM Webinterface 

          Kommando-Feld: define Rolladen_Bad  Fernotron a=90D1234   (Enter)
		  attr Feld: webCmd: down:stop:up  (Enter)
		  Save config
		  
		  Motor reagiert nun auf down/stop/up/set 
</code>		  
  </li>
</ol>
=end html
=cut
